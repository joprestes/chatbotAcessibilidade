<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ada - Chatbot de Acessibilidade Digital e WCAG">
    <title>Ada | Assistente de Acessibilidade</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíú</text></svg>">
</head>
<body>
    <a href="#user-input" class="skip-link">Pular para o chat</a>
    
    <div class="app-wrapper">
        <!-- Conte√∫do Principal -->
        <div class="main-content-wrapper">
            <header role="banner" class="glass-header">
                <div class="header-content">
                    <div class="header-branding">
                        <div class="ada-header-profile" data-testid="ada-header-profile">
                            <img src="/assets/ada-states/ada-greeting.png" alt="Ada" class="ada-header-avatar" data-testid="avatar-ada">
                            <div class="ada-header-info">
                                <h1>Ada</h1>
                                <span class="ada-header-status">Sua Assistente de Inclus√£o Digital</span>
                            </div>
                        </div>
                    </div>
                    <div class="header-controls">
                        <button 
                            id="search-toggle" 
                            class="icon-button" 
                            data-testid="btn-buscar"
                            aria-label="Buscar no hist√≥rico"
                            aria-expanded="false"
                            title="Buscar mensagens"
                        >
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                        <button 
                            id="clear-chat-button" 
                            class="icon-button" 
                            data-testid="btn-limpar-chat"
                            aria-label="Limpar hist√≥rico do chat"
                            title="Limpar conversa"
                        >
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M3 6h18"></path>
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            </svg>
                        </button>
                        <button 
                            id="theme-toggle" 
                            class="icon-button" 
                            data-testid="btn-toggle-tema"
                            aria-label="Alternar para modo escuro"
                            title="Mudar tema"
                        >
                            <svg id="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path class="theme-icon-moon" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                <!-- √çcone do sol (ser√° adicionado dinamicamente via JS) -->
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Campo de busca (oculto por padr√£o) -->
                <div id="search-wrapper" class="search-wrapper hidden" data-testid="search-wrapper">
                    <input 
                        type="text" 
                        id="search-input"
                        class="search-input" 
                        placeholder="Buscar no hist√≥rico..." 
                        data-testid="search-input"
                        aria-label="Buscar mensagens no hist√≥rico"
                    >
                </div>
            </header>

            <main role="main" id="main-content">
                <div id="chat-container" class="chat-container glass-chat" role="log" aria-live="polite" aria-label="Hist√≥rico de mensagens">
                    <!-- Card de Introdu√ß√£o (aparece quando chat vazio) -->
                    <div id="intro-card" class="intro-card" data-testid="intro-card">
                        <div class="intro-card-content">
                            <img src="/assets/ada-states/ada-greeting.png" alt="Ada" class="intro-card-avatar" data-testid="intro-avatar">
                            <div class="intro-card-text">
                                <h2>Ol√°! Eu sou a Ada üëã</h2>
                                <p>Seu assistente de acessibilidade digital. Estou aqui para ajudar voc√™ a entender WCAG, ARIA, testes de acessibilidade e muito mais!</p>
                                <p><strong>Comece fazendo uma pergunta ou escolha uma sugest√£o abaixo:</strong></p>
                            </div>
                        </div>
                        <!-- Sugest√µes dentro do card de introdu√ß√£o -->
                        <div id="suggestion-chips-empty" class="suggestion-chips-empty" data-testid="suggestion-chips-empty">
                            <button class="chip" onclick="fillInput('Como testar contraste de cores?')" aria-label="Perguntar sobre contraste de cores" data-testid="chip-contraste">
                                <span aria-hidden="true">üé®</span> Como testar contraste?
                            </button>
                            <button class="chip" onclick="fillInput('O que √© navega√ß√£o por teclado?')" aria-label="Perguntar sobre navega√ß√£o por teclado" data-testid="chip-teclado">
                                <span aria-hidden="true">‚å®Ô∏è</span> O que √© navega√ß√£o por teclado?
                            </button>
                            <button class="chip" onclick="fillInput('Gere um checklist WCAG AA')" aria-label="Gerar checklist WCAG AA" data-testid="chip-checklist">
                                <span aria-hidden="true">‚úÖ</span> Gerar Checklist WCAG
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <footer class="input-area-wrapper">
                <form id="chat-form" class="chat-form" data-testid="form-chat">
                    <div class="input-container floating-pill">
                        <label for="user-input" class="sr-only">Digite sua pergunta</label>
                        <button 
                            type="button"
                            id="cancel-button"
                            class="cancel-button hidden"
                            data-testid="btn-cancelar"
                            aria-label="Cancelar requisi√ß√£o"
                            title="Cancelar"
                        >
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="6" y="6" width="12" height="12"></rect>
                            </svg>
                        </button>
                        <textarea 
                            id="user-input" 
                            name="pergunta"
                            data-testid="input-pergunta"
                            placeholder="Pergunte sobre WCAG, ARIA ou testes..."
                            autocomplete="off"
                            rows="1"
                            aria-label="Campo de texto para sua pergunta"
                        ></textarea>
                        <button 
                            type="submit" 
                            id="send-button"
                            class="send-button"
                            data-testid="btn-enviar"
                            aria-label="Enviar mensagem"
                        >
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </form>
            </footer>
        </div>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container" role="region" aria-live="assertive" aria-label="Notifica√ß√µes"></div>
    </div>

    <script src="/static/app.js"></script>
    <script>
        // Helper global para os bot√µes de sugest√£o
        function fillInput(text) {
            const input = document.getElementById('user-input');
            if(input) {
                input.value = text;
                input.focus();
            }
        }
    </script>
</body>
</html>