<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ada - Chatbot de Acessibilidade Digital e WCAG">
    <title>Ada | Assistente de Acessibilidade</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíú</text></svg>">
</head>

<body>
    <a href="#user-input" class="skip-link">Pular para o chat</a>

    <div class="app-wrapper">
        <!-- Conte√∫do Principal -->
        <div class="main-content-wrapper">
            <header role="banner" class="glass-header">
                <div class="header-content">
                    <div class="header-branding">
                        <div class="ada-header-profile" data-testid="ada-header-profile">
                            <img src="/assets/ada-logo.png" alt="Ada - Assistente de Acessibilidade Digital"
                                class="ada-header-avatar" data-testid="logo-ada">
                            <div class="ada-header-info">
                                <h1>Ada</h1>
                                <span class="ada-header-status">Sua Assistente de Inclus√£o Digital</span>
                            </div>
                        </div>
                    </div>
                    <div class="header-controls">
                        <button id="search-toggle" class="icon-button" data-testid="btn-buscar"
                            aria-label="Buscar no hist√≥rico" aria-expanded="false" title="Buscar mensagens">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                        <button id="clear-chat-button" class="icon-button" data-testid="btn-limpar-chat"
                            aria-label="Limpar hist√≥rico do chat" title="Limpar conversa">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M3 6h18"></path>
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            </svg>
                        </button>
                        <button id="theme-toggle" class="icon-button" data-testid="btn-toggle-tema"
                            aria-label="Alternar para modo escuro" title="Mudar tema">
                            <svg id="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                aria-hidden="true">
                                <path class="theme-icon-moon" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">
                                </path>
                                <!-- √çcone do sol (ser√° adicionado dinamicamente via JS) -->
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Campo de busca (oculto por padr√£o) -->
                <div id="search-wrapper" class="search-wrapper hidden" data-testid="search-wrapper">
                    <input type="text" id="search-input" class="search-input" placeholder="Buscar no hist√≥rico..."
                        data-testid="search-input" aria-label="Buscar mensagens no hist√≥rico">
                </div>
            </header>

            <main role="main" id="main-content">
                <div id="chat-container" class="chat-container glass-chat" role="log" aria-live="polite"
                    aria-label="Hist√≥rico de mensagens">
                    <!-- Card de Introdu√ß√£o (aparece quando chat vazio) -->
                    <div id="intro-card" class="intro-card" data-testid="intro-card">
                        <div class="intro-card-content">
                            <img src="/assets/ada-states/ada-greeting.png" alt="Ada" class="intro-card-avatar"
                                data-testid="intro-avatar">
                            <div class="intro-card-text">
                                <h2>Ol√°! Eu sou a Ada üëã</h2>
                                <p>Seu assistente de acessibilidade digital. Estou aqui para ajudar voc√™ a entender
                                    WCAG, ARIA, testes de acessibilidade e muito mais!</p>
                                <p><strong>Comece fazendo uma pergunta ou escolha uma sugest√£o abaixo:</strong></p>
                            </div>
                        </div>
                        <!-- Sugest√µes dentro do card de introdu√ß√£o -->
                        <div id="suggestion-chips-empty" class="suggestion-chips-empty"
                            data-testid="suggestion-chips-empty">
                            <button class="chip" onclick="fillInput('Explique o crit√©rio 1.4.3 da WCAG')"
                                aria-label="Perguntar sobre crit√©rio de contraste" data-testid="chip-contraste">
                                <span aria-hidden="true">üé®</span> Explique WCAG 1.4.3
                            </button>
                            <button class="chip" onclick="fillInput('Quais s√£o as roles ARIA para abas?')"
                                aria-label="Perguntar sobre roles ARIA" data-testid="chip-aria">
                                <span aria-hidden="true">üè∑Ô∏è</span> Roles ARIA para Abas
                            </button>
                            <button class="chip" onclick="fillInput('Como tornar um carrossel acess√≠vel?')"
                                aria-label="Perguntar sobre carrossel acess√≠vel" data-testid="chip-carrossel">
                                <span aria-hidden="true">üé†</span> Carrossel Acess√≠vel
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <footer class="input-area-wrapper">
                <form id="chat-form" class="chat-form" data-testid="form-chat">
                    <div class="input-container floating-pill">
                        <label for="user-input" class="sr-only">Digite sua pergunta</label>

                        <!-- Bot√£o de Ajuda Contextual (WCAG 3.3.5) -->
                        <button type="button" class="help-button" aria-label="Ver exemplos de perguntas"
                            data-testid="btn-ajuda" data-tooltip="Clique para ver exemplos de perguntas">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" aria-hidden="true">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                        </button>

                        <!-- Bot√£o de Modo C√≥digo (Novo) -->
                        <button type="button" id="code-mode-toggle" class="icon-button-small"
                            aria-label="Ativar Modo de Refatora√ß√£o de C√≥digo" data-testid="btn-code-mode"
                            data-tooltip="Ativa o modo para colar c√≥digo">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" aria-hidden="true">
                                <polyline points="16 18 22 12 16 6"></polyline>
                                <polyline points="8 6 2 12 8 18"></polyline>
                            </svg>
                        </button>

                        <!-- Bot√£o de Personas (Novo) -->
                        <button type="button" id="persona-toggle" class="icon-button-small"
                            aria-label="Simular Experi√™ncia de Usu√°rio com Personas" data-testid="btn-persona"
                            data-tooltip="Escolha um perfil de usu√°rio para simular">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" aria-hidden="true">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </button>

                        <!-- Bot√£o de Expandir Input (Novo) -->
                        <button type="button" id="expand-input-toggle" class="icon-button-small"
                            aria-label="Expandir √°rea de texto" data-testid="btn-expand"
                            data-tooltip="Aumentar √°rea de digita√ß√£o para facilitar leitura">
                            <!-- √çcone Expandir -->
                            <svg id="icon-expand" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <polyline points="9 21 3 21 3 15"></polyline>
                                <line x1="21" y1="3" x2="14" y2="10"></line>
                                <line x1="3" y1="21" x2="10" y2="14"></line>
                            </svg>
                            <!-- √çcone Colapsar (Oculto inicialmente) -->
                            <svg id="icon-collapse" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"
                                style="display: none;">
                                <polyline points="4 14 10 14 10 20"></polyline>
                                <polyline points="20 10 14 10 14 4"></polyline>
                                <line x1="14" y1="10" x2="21" y2="3"></line>
                                <line x1="3" y1="21" x2="10" y2="14"></line>
                            </svg>
                        </button>

                        <button type="button" id="cancel-button" class="cancel-button hidden" data-testid="btn-cancelar"
                            aria-label="Cancelar resposta" data-tooltip="Parar a gera√ß√£o da resposta">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="6" y="6" width="12" height="12"></rect>
                            </svg>
                        </button>

                        <textarea id="user-input" name="pergunta" data-testid="input-pergunta"
                            placeholder="Pergunte sobre WCAG, ARIA ou testes..." autocomplete="off" rows="1"
                            aria-label="Campo de texto para sua pergunta" aria-describedby="input-hint"></textarea>

                        <button type="submit" id="send-button" class="send-button" data-testid="btn-enviar"
                            aria-label="Enviar mensagem" data-tooltip="Enviar sua pergunta">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>

                    <!-- Hint de Ajuda (WCAG 3.3.5) -->
                    <div id="input-hint" class="input-hint">
                        <strong>Dica:</strong> Pergunte sobre WCAG, ARIA, testes de acessibilidade, etc.
                    </div>
                </form>
            </footer>
        </div>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container" role="region" aria-live="assertive" aria-label="Notifica√ß√µes">
        </div>

        <!-- Modal Acess√≠vel (WCAG 2.4.3) -->
        <div id="accessible-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title"
            aria-hidden="true" hidden>
            <div class="modal-container">
                <div class="modal-header">
                    <h2 id="modal-title" class="modal-title">T√≠tulo do Modal</h2>
                    <button type="button" class="modal-close" aria-label="Fechar modal" data-testid="modal-close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body" id="modal-content">
                    <!-- Conte√∫do din√¢mico do modal -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="modal-button modal-button-secondary"
                        data-action="cancel">Cancelar</button>
                    <button type="button" class="modal-button modal-button-primary"
                        data-action="confirm">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
    <script>
        // Helper global para os bot√µes de sugest√£o
        function fillInput(text) {
            const input = document.getElementById('user-input');
            if (input) {
                input.value = text;
                input.focus();
            }
        }
    </script>
</body>

</html>